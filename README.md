# ToyC Compiler

本项目是武汉大学编译原理课程实践的一部分，旨在实现一个简化版 C 语言 —— **ToyC** 的编译器。编译器以 ToyC 源文件（`.tc`）为输入，经过词法分析、语法分析、语义分析与代码生成等阶段，输出可在 RISC-V32 架构上运行的汇编代码（`.s` 文件）。

## 项目目标

- 使用 **OCaml (版本 5.3.0)** 开发完整的 ToyC 编译器
- 支持从 ToyC 源代码生成有效、正确、规范的 RISC-V 汇编代码
- 满足课程提供的所有测试用例的语义与语法约束
- 尽可能实现中间代码与汇编优化，提高程序运行性能

## ToyC 语言特性

ToyC 是 C 语言的子集，具有以下特性：

- 支持函数定义、变量声明与赋值、控制流（if-else、while）、break、continue、return 等语句
- 表达式支持基本的算术、关系、逻辑运算，运算规则与优先级同 C 语言
- 不支持数组、指针、结构体、I/O、多文件等高级特性
- 每个程序必须包含一个 `int main()` 入口函数

详细文法和语义规则见课程任务书。

## 编译器结构

编译器实现分为如下几个阶段：

1. **词法分析（Lexer）**：将源文件解析为标记流（token stream）
2. **语法分析（Parser）**：根据文法规则构建抽象语法树（AST）
3. **语义分析**：进行类型检查、作用域检查、控制流合法性分析等
4. **中间表示生成（IR）**：生成适合进一步优化与代码生成的中间表示
5. **代码生成（Codegen）**：生成 RISC-V32 汇编代码
6. **优化阶段**：如常量传播、死代码消除等

## 项目结构

To be finished

## 使用方法

To be finished
